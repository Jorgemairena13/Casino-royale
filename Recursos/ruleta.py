from rich import print 
from rich.panel import Panel
from rich.align import Align
from prompt_toolkit import prompt
from prompt_toolkit.styles import Style
from rich.table import Table
from prompt_toolkit.completion import FuzzyWordCompleter
from rich.console import Console
from datetime import datetime
from time import sleep
import os

import random
console = Console()

def limpiar_pantalla():
    """Limpia la pantalla segÃºn el sistema operativo."""
    os.system('cls' if os.name == 'nt' else 'clear')

class Ruleta():
  def __init__(self):
    self.n = [
        00,  32, 15, 19, 4,  21, 2,  25, 17, 34, 6,  27, 13, 36, 11, 30, 8,  23,
        10, 5,  24, 16, 33, 1,  20, 14, 31, 9,  22, 18, 29, 7,  28, 12, 35, 3,  26
    ]

  def mostrar_ruleta(self,n):  
    '''Muestra la ruleta y el tablero de la ruleta'''
    # Tablero para que el usuario vea a que se puede apostar
    tablero_ruleta = '''
    â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”“
    â”ƒ                              RULETA CASINO                              â”ƒ
    â”£â”â”â”â”â”â”â”â”³â”â”â”â”â”â”³â”â”â”â”â”â”³â”â”â”â”â”â”³â”â”â”â”â”â”³â”â”â”â”â”â”³â”â”â”â”â”â”³â”â”â”â”â”â”³â”â”â”â”â”â”³â”â”â”â”â”â”³â”â”â”â”â”â”³â”â”â”â”â”â”«
    â”ƒ       â”ƒ  3  â”ƒ  6  â”ƒ  9  â”ƒ 12  â”ƒ 15  â”ƒ 18  â”ƒ 21  â”ƒ 24  â”ƒ 27  â”ƒ 30  â”ƒ 33  â”ƒ
    â”ƒ       â”ƒ ğŸ”´  â”ƒ âš«  â”ƒ ğŸ”´  â”ƒ ğŸ”´  â”ƒ âš«  â”ƒ ğŸ”´  â”ƒ ğŸ”´  â”ƒ âš«  â”ƒ ğŸ”´  â”ƒ ğŸ”´  â”ƒ âš«  â”ƒ
    â”£â”â”â”â”â”â”â”â•‹â”â”â”â”â”â•‹â”â”â”â”â”â•‹â”â”â”â”â”â•‹â”â”â”â”â”â•‹â”â”â”â”â”â•‹â”â”â”â”â”â•‹â”â”â”â”â”â•‹â”â”â”â”â”â•‹â”â”â”â”â”â•‹â”â”â”â”â”â•‹â”â”â”â”â”â”«
    â”ƒ    0  â”ƒ  2  â”ƒ  5  â”ƒ  8  â”ƒ 11  â”ƒ 14  â”ƒ 17  â”ƒ 20  â”ƒ 23  â”ƒ 26  â”ƒ 29  â”ƒ 32  â”ƒ
    â”ƒ   ğŸŸ¢  â”ƒ âš«  â”ƒ ğŸ”´  â”ƒ âš«  â”ƒ âš«  â”ƒ ğŸ”´  â”ƒ âš«  â”ƒ âš«  â”ƒ ğŸ”´  â”ƒ âš«  â”ƒ âš«  â”ƒ ğŸ”´  â”ƒ
    â”£â”â”â”â”â”â”â”â•‹â”â”â”â”â”â•‹â”â”â”â”â”â•‹â”â”â”â”â”â•‹â”â”â”â”â”â•‹â”â”â”â”â”â•‹â”â”â”â”â”â•‹â”â”â”â”â”â•‹â”â”â”â”â”â•‹â”â”â”â”â”â•‹â”â”â”â”â”â•‹â”â”â”â”â”â”«
    â”ƒ       â”ƒ  1  â”ƒ  4  â”ƒ  7  â”ƒ 10  â”ƒ 13  â”ƒ 16  â”ƒ 19  â”ƒ 22  â”ƒ 25  â”ƒ 28  â”ƒ 31  â”ƒ
    â”ƒ       â”ƒ ğŸ”´  â”ƒ âš«  â”ƒ ğŸ”´  â”ƒ âš«  â”ƒ âš«  â”ƒ ğŸ”´  â”ƒ ğŸ”´  â”ƒ âš«  â”ƒ ğŸ”´  â”ƒ âš«  â”ƒ âš«  â”ƒ
    â”£â”â”â”â”â”â”â”â”»â”â”â”â”â”â”»â”â”â”â”â”â”»â”â”â”â”â”â”»â”â”â”â”â”â”»â”â”â”â”â”â”»â”â”â”â”â”â”»â”â”â”â”â”â”»â”â”â”â”â”â”»â”â”â”â”â”â”»â”â”â”â”â”â”»â”â”â”â”â”â”«
    â”ƒ  1-12 PRIMERA DOCENA  â”ƒ  13-24 SEGUNDA DOCENA  â”ƒ  25-36 TERCERA DOCENA  â”ƒ
    â”£â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”»â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”»â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”«
    â”ƒ    1-18   â”ƒ    PAR    â”ƒ    ğŸ”´    â”ƒ   IMPAR   â”ƒ   19-36   â”ƒ     âš«       â”ƒ
    â”—â”â”â”â”â”â”â”â”â”â”â”â”»â”â”â”â”â”â”â”â”â”â”â”â”»â”â”â”â”â”â”â”â”â”â”â”»â”â”â”â”â”â”â”â”â”â”â”â”»â”â”â”â”â”â”â”â”â”â”â”â”»â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”›
    '''
    # Ruleta con todo los indice metidos
    ruleta2 = f"""[bold #6fff90]
                  â–“â–’â–’â–’â–“â–“â–“â–“â–“â–“â–“â–“â–“â–’â–’â–’â–“               
              â–“â–“â–“â–“â–ˆâ–“â–“â–“â–ˆâ–ˆâ–ˆâ–ˆ[white on green]0{n[0]}[/]â–“â–“â–“â–ˆâ–ˆâ–ˆâ–ˆâ–“â–“â–“â–“â–“           
            â–’â–“â–“â–ˆâ–ˆâ–ˆâ–ˆâ–“â–“[white on black]{n[36]}[/]â–“â–ˆâ–ˆâ–ˆâ–“â–“[white on red]{n[1]}[/]â–“â–ˆâ–ˆâ–ˆâ–ˆâ–“â–“â–“â–ˆâ–ˆâ–ˆâ–“      
          â–’â–“â–“â–ˆâ–“â–“â–“â–“â–ˆ[white on red]0{n[35]}[/]â–ˆâ–ˆâ–“â–“â–“â–ˆâ–ˆâ–ˆâ–“â–“â–“â–ˆâ–ˆ[white on black]{n[2]}[/]â–ˆâ–“â–“â–“â–ˆâ–ˆâ–ˆâ–ˆâ–“â–“â–“â–’   
        â–’â–“â–ˆâ–ˆâ–ˆâ–ˆ[white on black]{n[34]}[/]â–“â–“â–“â–“â–ˆâ–ˆâ–ˆâ–“â–“â–“â–ˆâ–ˆâ–“â–“â–“â–ˆâ–ˆâ–“â–“â–“â–ˆ[white on red]{n[3]}[/]â–ˆâ–ˆâ–“â–“â–“â–“â–“â–ˆâ–“   
      â–“â–’â–“â–“â–“[white on red]{n[33]}[/]â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–“â–“â–“â–“â–“â–“â–’â–’â–’â–’â–’â–’â–’â–’â–’â–“â–“â–“â–ˆâ–ˆâ–ˆâ–“[white on black]0{n[4]}[/]â–“â–“â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–“
      â–“â–’â–“[white on black]{n[32]}[/]â–“â–“â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–“â–“â–“â–“â–“â–“â–’â–’â–’â–’â–’â–’â–’â–’â–’â–“â–“â–“â–ˆâ–ˆâ–ˆâ–“â–“â–“â–ˆ[white on red]{n[5]}[/]â–ˆâ–ˆâ–ˆâ–ˆâ–“
      â–“â–“â–ˆ[white on red]0{n[31]}[/]â–ˆâ–“â–“â–“â–“â–“â–ˆâ–ˆâ–ˆâ–“â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–“â–“â–“â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–“â–“â–“â–“â–“  
    â–’â–“â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–“â–“â–“â–“â–“â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–“â–ˆâ–ˆâ–ˆâ–“â–“â–“â–“[white on black]0{n[6]}[/]â–“â–“â–“â–’ 
    â–’â–“â–“â–“[white on red]{n[30]}[/]â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–“â–“â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–“â–“â–“â–“â–“â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–’ 
    â–’â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–“â–ˆâ–ˆâ–ˆâ–ˆâ–ˆ[white on black]{n[7]}[/]â–ˆâ–ˆâ–ˆâ–“â–’
    â–“â–ˆâ–ˆâ–ˆâ–ˆ[white on black]{n[29]}[/]â–“â–ˆâ–ˆâ–“â–“â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–“â–“â–“â–“â–“â–“â–“â–“â–“â–’
    â–“â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–“â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–“â–“â–ˆâ–ˆâ–“[white on red]{n[8]}[/]â–“â–ˆâ–ˆâ–ˆâ–“
    â–“â–ˆâ–ˆâ–ˆâ–ˆ[white on red]{n[28]}[/]â–ˆâ–ˆâ–ˆâ–ˆâ–“â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–“â–“â–ˆâ–ˆâ–“â–“â–ˆâ–ˆâ–ˆâ–“
    â–“â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–“â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–“â–“â–ˆâ–ˆâ–“[white on red]{n[9]}[/]â–“â–ˆâ–ˆâ–ˆâ–“
    â–“â–“â–ˆâ–ˆâ–ˆ[white on red]0{n[27]}[/]â–“â–ˆâ–ˆâ–ˆâ–“â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“
    â–“â–“â–ˆâ–ˆâ–ˆâ–“â–ˆâ–ˆâ–ˆâ–“â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–“â–“â–“â–“â–“[white on black]0{n[10]}[/]â–“â–“â–“â–“â–“
    â–“â–“â–ˆâ–ˆâ–ˆ[white on black]{n[26]}[/]â–“â–ˆâ–ˆâ–ˆâ–“â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“
    â–“â–ˆâ–ˆâ–ˆâ–ˆâ–“â–ˆâ–ˆâ–ˆâ–“â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–“â–ˆâ–ˆâ–“â–“[white on black]{n[11]}[/]â–“â–“â–“â–“â–’
    â–’â–“â–ˆâ–ˆâ–“[white on red]{n[25]}[/]â–“â–“â–“â–“â–“â–“â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–“â–“â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–“â–’
    â–’â–“â–“â–“â–“â–“â–ˆâ–ˆâ–ˆâ–ˆâ–“â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–“â–“â–“â–“â–“[white on black]{n[12]}[/]â–ˆâ–ˆâ–ˆâ–ˆâ–’ 
    â–’â–’â–ˆâ–ˆâ–ˆâ–ˆ[white on red]{n[24]}[/]â–ˆâ–ˆâ–ˆâ–“â–“â–“â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–“â–ˆâ–ˆâ–ˆâ–ˆâ–“â–“â–“â–“â–“â–’â–“ 
      â–’â–“â–ˆâ–ˆâ–ˆâ–“â–“â–“â–“â–“â–ˆâ–ˆâ–“â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–“â–“â–“â–“â–ˆâ–ˆâ–ˆ[white on black]{n[13]}[/]â–ˆâ–ˆâ–ˆâ–“â–“â–’  
      â–“â–“â–“â–“â–“â–“[white on black]0{n[23]}[/]â–“â–ˆâ–ˆâ–ˆâ–ˆâ–“â–“â–“â–“â–“â–’â–’â–’â–’â–’â–’â–’â–’â–’â–“â–“â–“â–ˆâ–ˆâ–ˆâ–“â–“â–“â–“â–“â–ˆâ–ˆâ–ˆâ–“â–’   
        â–’â–“â–“â–ˆâ–ˆâ–ˆâ–“â–“â–“â–“â–ˆâ–ˆâ–ˆâ–“â–“â–“â–ˆâ–ˆâ–“â–“â–ˆâ–ˆâ–ˆâ–“â–“â–“â–ˆâ–ˆâ–“â–ˆâ–“â–“[white on red]{n[14]}[/]â–“â–“â–“â–’     
          â–’â–“â–“â–ˆâ–ˆ[white on black]{n[22]}[/]â–“â–“â–“â–“â–ˆâ–ˆâ–ˆâ–“â–“â–“â–ˆâ–ˆâ–ˆâ–“â–“â–“â–ˆâ–ˆâ–ˆâ–“â–“â–“â–ˆâ–ˆâ–ˆâ–ˆâ–“â–“â–’â–’      
          â–’â–“â–“â–ˆâ–ˆâ–“â–“â–“[white on red]{n[21]}[/]â–“â–ˆâ–ˆâ–ˆâ–“â–“â–“â–ˆâ–ˆâ–ˆâ–“â–“â–“â–ˆâ–ˆâ–ˆâ–“â–“â–“[white on black]{n[15]}[/]â–ˆâ–ˆâ–ˆâ–ˆâ–“â–“   
            â–’â–“â–“â–“â–“â–ˆâ–ˆâ–ˆ[white on black]{n[20]}[/]â–“â–“â–“â–“â–ˆâ–ˆâ–ˆâ–“â–“â–“â–ˆâ–ˆâ–ˆ[white on red]0{n[16]}[/]â–ˆâ–“â–“â–“â–ˆâ–ˆâ–“â–’         
              â–“â–’â–“â–“â–ˆâ–ˆâ–“â–“â–“[white on black]0{n[19]}[/]â–“â–ˆ[white on red]{n[18]}[/]â–ˆâ–ˆâ–“[white on black]{n[17]}[/]â–“â–“â–“â–ˆâ–ˆâ–ˆâ–“â–“          
                  â–’â–’â–’â–’â–“â–“â–“â–“â–“â–“â–“â–“â–“â–’â–’â–’â–’   [/]            
    """
    return ruleta2 + tablero_ruleta
    


  def animar_ruleta(self,iteraciones,delay = 0.1):
    # Hacemos una copia para no alterar la lista original
    n = self.n.copy()

    # Bola que se vera en la ruleta
    bola = '[on #ff6fde ] âšª [/]'

    # Longitud de la ruleta
    longitud = len(n)

  # Bucle que itera un numero de iteraciones ramdom
    for i in range(iteraciones):
        limpiar_pantalla()

        # Calculamos el indice 
        indice = i % longitud

        # Calculamos el anterior
        anterior = (i - 1) % longitud

        # Restauramos el anterior
        n[anterior] = self.n[anterior]  

        # Indice para colocar la bola
        n[indice] = bola                

        # Mostramos la ruleta con la bola
        console.print(self.mostrar_ruleta(n))

        # Tiempo de espera para que parezca que se mueve
        sleep(delay)
    # Devolvemos el anterior mas 1 para saber donde a caido la bola 
    return  self.n[(anterior + 1) % len(self.n)]

      
  def buscar_apuesta(self,dinero,apuestas_jugador,numeros_sueltos):
    

    # Numeros ramdom para las vueltas de la ruleta
    iteraciones = random.randint(100, 300)

    # Animamos la ruleta y guardamos el resultado
    resultado_rule = self.animar_ruleta(iteraciones= 39)
    
    for numero in numeros_sueltos:
      if resultado_rule == numero:
        dinero_devolver = dinero * 35
    
    
    


    # Listas que vamos a usar para comparar con el resultado del jugador y lo que salga en la ruleta
    
    # Lista de colores
    rojos = [1, 3, 5, 7, 9, 12, 14, 16, 18, 19, 21, 23, 25, 27, 30, 32, 34, 36]
    negros = [2, 4, 6, 8, 10, 11, 13, 15, 17, 20, 22, 24, 26, 28, 29, 31, 33, 35]
    verde = [0] 

    # Par o impar
    pares = [n for n in range(1, 37) if n % 2 == 0]
    impares = [n for n in range(1, 37) if n % 2 != 0]

    
    # Docenas
    primera_docena = list(range(1, 13))     
    segunda_docena = list(range(13, 25))    
    tercera_docena = list(range(25, 37))    

    # A nuemros altos o bajos
    baja = list(range(1, 19))   
    alta = list(range(19, 37))  

    # Las filas del tablero
    fila_1 = [3, 6, 9, 12, 15, 18, 21, 24, 27, 30, 33, 36]
    fila_2 = [2, 5, 8, 11, 14, 17, 20, 23, 26, 29, 32, 35]
    fila_3 = [1, 4, 7, 10, 13, 16, 19, 22, 25, 28, 31, 34]


    return dinero_devolver
   




